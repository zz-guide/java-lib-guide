<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.zz.mapper.UserMapper">
    <sql id="selectUserWithLeftJoinVo">
        select
        u.id as id,
        u.name as name,
        u.username as username,
        u.password as password,
        u.created_at as created_at,
        u.updated_at as updated_at,
        o.id as o_id,
        o.sn as o_sn
        from `user` as u left join `orders` AS o ON u.id = o.user_id where u.id = #{id}
    </sql>

    <resultMap id="userResultMapWithLeftJoin" type="User">
        <result property="id" column="id" />
        <result property="name" column="name" />
        <result property="username" column="username" />
        <result property="password" column="password" />
        <result property="createdAt" column="created_at" />
        <result property="updatedAt" column="updated_at" />
        <collection property="orders" ofType="Order">
            <result column="o_id" property="id"/>
            <result column="o_sn" property="sn"/>
        </collection>
    </resultMap>

    <select id="getByIdWithLeftJoin" parameterType="Long"  resultMap="userResultMapWithLeftJoin">
        <include refid="selectUserWithLeftJoinVo" />
    </select>
</mapper>
